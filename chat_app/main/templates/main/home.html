{% extends 'base.html' %}

{% block title %} 
    Home
{% endblock %}

{% block body %} 

    <nav class="navbar navbar-light bg-light">
        <div class="container-fluid">
            <form class="d-flex order-1" method="post" action="{% url 'searchhandle' %}">
                {% csrf_token %}
                <input class="form-control me-2" type="text" placeholder="Search" aria-label="Search" name='email'>
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
            <form class="d-flex order-2" method="post" action="{% url 'requests' %}">
                {% csrf_token %}
                <button class="btn btn-outline-success" type="submit">Add Friends</button>
            </form>
        </div>
    </nav>

    
    {% if user.is_authenticated %}

        {% comment %} Writing friend request logic {% endcomment %}
        <h1>To send friend request</h1>
        {% for users in allusers %}
            {% comment %} {% if not user.is_superuser %}
                {% if user not in request.users.friends.all and user != request.user %} {% endcomment %}
                    <h3>{{ users.fname }} <a href="{% url 'send_friend_request' userID=users.id %}">Send friend request</a></h3>
                {% comment %} {% endif %}
            {% endif %} {% endcomment %}
        {% endfor %}

    {% else %}
    <p>You are not logged in</p>
    <a href="{% url 'login' %}">Log In</a>
    {% endif %}

    <br>
    
    {% if user.is_authenticated %}
    {{ email }} is available
    {% else %}
    <p>{{ email }} is not available</p>
    <a href="{% url 'searchhandle' %}">Log In</a>
    {% endif %}


{% endblock %}